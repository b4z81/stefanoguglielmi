{"version":3,"sources":["app.js"],"names":["$","require","document","ready","initBackground","wrapperHeight","Math","ceil","halfWindowW","aspectRatio","proportions","maxRotationY","maxRotationX","sin","PI","newImageWidth","newImageHeight","newLeft","newTop","css","height","addClass","left","top","width","moveBackground","event","topOffset","rotateY","pageX","yPosition","pageY","rotateX","halfWindowH","-moz-transform","-webkit-transform","-ms-transform","-o-transform","transform","window","find","eq","on","this","hasClass","each","complete","wrapperOffsetTop","offset","requestAnimationFrame","attr","removeClass","element","createElement","html","getElementsByTagName","body","propertys","webkitTransformStyle","MozTransformStyle","msTransformStyle","transformStyle","insertBefore","i","undefined","style","st","getComputedStyle","getPropertyValue","className","removeChild"],"mappings":"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","file":"app.js","sourcesContent":["var $ = require(\"jquery\");\n\nrequire('browsernizr/test/css/transforms3d');\nrequire('browsernizr');\n\n$(document).ready(function(){\n\t//define store some initial variables\n\tvar\thalfWindowH = $(window).height()*0.5,\n\t\thalfWindowW = $(window).width()*0.5,\n\t\t//define a max rotation value (X and Y axises)\n\t\tmaxRotationY = 5,\n\t\tmaxRotationX = 3,\n\t\taspectRatio;\n\n\t//detect if hero <img> has been loaded and evaluate its aspect-ratio\n\t$('.cd-floating-background').find('img').eq(0).on('load',function() {\n\t\taspectRatio = $(this).width()/$(this).height();\n  \t\tif( $('html').hasClass('preserve-3d') ) initBackground();\n\t}).each(function() {\n\t\t//check if image was previously load - if yes, trigger load event\n  \t\tif(this.complete) $(this).on('load');\n\t});\n\n\t//detect mouse movement\n\t$('.cd-background-wrapper').each(function(){\n\t\t$(this).on('mousemove', function(event){\n\t\t\tvar wrapperOffsetTop = $(this).offset().top;\n\t\t\tif( $('html').hasClass('preserve-3d') ) {\n\t\t\t\twindow.requestAnimationFrame(function(){\n\t\t\t\t\tmoveBackground(event, wrapperOffsetTop);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\t//on resize - adjust .cd-background-wrapper and .cd-floating-background dimentions and position\n\t$(window).on('resize', function(){\n\t\tif( $('html').hasClass('preserve-3d') ) {\n\t\t\twindow.requestAnimationFrame(function(){\n\t\t\t\thalfWindowH = $(window).height()*0.5,\n\t\t\t\thalfWindowW = $(window).width()*0.5;\n\t\t\t\tinitBackground();\n\t\t\t});\n\t\t} else {\n\t\t\t$('.cd-background-wrapper').attr('style', '');\n\t\t\t$('.cd-floating-background').attr('style', '').removeClass('is-absolute');\n\t\t}\n\t});\n\n\tfunction initBackground() {\n\t\tvar wrapperHeight = Math.ceil(halfWindowW*2/aspectRatio),\n\t\t\tproportions = ( maxRotationY > maxRotationX ) ? 1.1/(Math.sin(Math.PI / 2 - maxRotationY*Math.PI/180)) : 1.1/(Math.sin(Math.PI / 2 - maxRotationX*Math.PI/180)),\n\t\t\tnewImageWidth = Math.ceil(halfWindowW*2*proportions),\n\t\t\tnewImageHeight = Math.ceil(newImageWidth/aspectRatio),\n\t\t\tnewLeft = halfWindowW - newImageWidth/2,\n\t\t\tnewTop = (wrapperHeight - newImageHeight)/2;\n\n\t\t//set an height for the .cd-background-wrapper\n\t\t$('.cd-background-wrapper').css({\n\t\t\t'height' : wrapperHeight,\n\t\t});\n\t\t//set dimentions and position of the .cd-background-wrapper\n\t\t$('.cd-floating-background').addClass('is-absolute').css({\n\t\t\t'left' : newLeft,\n\t\t\t'top' : newTop,\n\t\t\t'width' : newImageWidth,\n\t\t});\n\t}\n\n\tfunction moveBackground(event, topOffset) {\n\t\tvar rotateY = ((-event.pageX+halfWindowW)/halfWindowW)*maxRotationY,\n\t\t\tyPosition = event.pageY - topOffset,\n\t\t\trotateX = ((yPosition-halfWindowH)/halfWindowH)*maxRotationX;\n\n\t\tif( rotateY > maxRotationY) rotateY = maxRotationY;\n\t\tif( rotateY < -maxRotationY ) rotateY = -maxRotationY;\n\t\tif( rotateX > maxRotationX) rotateX = maxRotationX;\n\t\tif( rotateX < -maxRotationX ) rotateX = -maxRotationX;\n\n\t\t$('.cd-floating-background').css({\n\t\t\t'-moz-transform': 'rotateX(' + rotateX + 'deg' + ') rotateY(' + rotateY + 'deg' + ') translateZ(0)',\n\t\t    '-webkit-transform': 'rotateX(' + rotateX + 'deg' + ') rotateY(' + rotateY + 'deg' + ') translateZ(0)',\n\t\t\t'-ms-transform': 'rotateX(' + rotateX + 'deg' + ') rotateY(' + rotateY + 'deg' + ') translateZ(0)',\n\t\t\t'-o-transform': 'rotateX(' + rotateX + 'deg' + ') rotateY(' + rotateY + 'deg' + ') translateZ(0)',\n\t\t\t'transform': 'rotateX(' + rotateX + 'deg' + ') rotateY(' + rotateY + 'deg' + ') translateZ(0)',\n\t\t});\n\t}\n});\n\n/* \tDetect \"transform-style: preserve-3d\" support, or update csstransforms3d for IE10 ? #762\n\thttps://github.com/Modernizr/Modernizr/issues/762 */\n(function getPerspective(){\n\n  var element = document.createElement('p'),\n      html = document.getElementsByTagName('html')[0],\n      body = document.getElementsByTagName('body')[0],\n      propertys = {\n        'webkitTransformStyle':'-webkit-transform-style',\n        'MozTransformStyle':'-moz-transform-style',\n        'msTransformStyle':'-ms-transform-style',\n        'transformStyle':'transform-style'\n      };\n\n    body.insertBefore(element, null);\n\n    for (var i in propertys) {\n        if (element.style[i] !== undefined) {\n            element.style[i] = \"preserve-3d\";\n        }\n    }\n\n    var st = window.getComputedStyle(element, null),\n        transform = st.getPropertyValue(\"-webkit-transform-style\") ||\n                    st.getPropertyValue(\"-moz-transform-style\") ||\n                    st.getPropertyValue(\"-ms-transform-style\") ||\n                    st.getPropertyValue(\"transform-style\");\n\n    if(transform!=='preserve-3d'){\n      html.className += ' no-preserve-3d';\n    } else {\n    \thtml.className += ' preserve-3d';\n    }\n    document.body.removeChild(element);\n\n})();\n"],"sourceRoot":"/source/"}